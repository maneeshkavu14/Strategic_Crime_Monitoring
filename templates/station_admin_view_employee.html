<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Crime Management</title>
    <!-- base:css -->
    <link rel="stylesheet" href="{{url_for('static',filename='vendors/mdi/css/materialdesignicons.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='vendors/feather/feather.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='vendors/base/vendor.bundle.base.css')}}">

    <!-- endinject -->
    <!-- plugin css for this page -->
    <link rel="stylesheet" href="{{url_for('static',filename='vendors/flag-icon-css/css/flag-icon.min.css')}}" />
    <link rel="stylesheet" href="{{url_for('static',filename='vendors/font-awesome/css/font-awesome.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='vendors/jquery-bar-rating/fontawesome-stars-o.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='vendors/jquery-bar-rating/fontawesome-stars.css')}}">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
    <!-- endinject -->
    <link rel="shortcut icon" href="{{url_for('static',filename='images/favicon.png')}}" />
    <!-- swal -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

</head>

<body>
    <div class="container-scroller">
        <!-- partial:partials/_navbar.html -->
        <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
            <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center" style="background-color: rgb(50, 44, 92)!important;">
                <a class="navbar-brand brand-logo"  style="color:beige" href="station_admin_home">CRIME</a>
                 <a class="navbar-brand brand-logo-mini" href="station_admin_home"><img src="{{url_for('static',filename='images/logo-mini.svg')}}" alt="logo" /></a>
             </div>
             <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
             
                 <ul class="navbar-nav navbar-nav-right">
                     <li class="nav-item dropdown mr-4 d-lg-flex d-none">
                         <a class="nav-link count-indicatord-flex align-item s-center justify-content-center" href="station_admin_home">
                             <i class="icon-box menu-icon"></i>
                             <span class="menu-title">Home</span>
                         </a>
                     </li>
                    
                     <li class="nav-item dropdown mr-4 d-lg-flex d-none">
                         <a  class="nav-link count-indicatord-flex align-item s-center justify-content-center" id="notificationDropdown" href="" data-toggle="dropdown">
                             <i class="icon-pie-graph menu-icon"></i>
                             <span class="menu-title">Employee</span>
                         </a>
                         <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
                             <!-- <p class="mb-0 font-weight-normal float-left dropdown-header">Settings</p> -->
                             <a class="dropdown-item preview-item" href="/station_admin_add_employee">
                                <i class="icon-file menu-icon"></i>
                                <span class="menu-title">Employee Registration</span>
                            </a>
                            
                         </li>
                         <li class="nav-item dropdown mr-4 d-lg-flex d-none">
                             <a  class="nav-link count-indicatord-flex align-item s-center justify-content-center" id="notificationDropdown" href="station_admin_home" data-toggle="dropdown">
                                 <i class="icon-head menu-icon"></i>
                                 <span class="menu-title">Users</span>
                             </a>
                             <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
                                 <!-- <p class="mb-0 font-weight-normal float-left dropdown-header">Settings</p> -->
                                 <a class="dropdown-item preview-item" href="/station_admin_manage_user">
                                    <i class="icon-head menu-icon"></i>
                                    <span class="menu-title">View Users</span>
                                </a>
                                 <a class="dropdown-item preview-item" href="/station_admin_accept_user_list">
                                    <i class="icon-head menu-icon"></i>
                                    <span class="menu-title">Accepted User</span>
                                </a>
                               
                             </li>
                           
                                 <li class="nav-item dropdown mr-4 d-lg-flex d-none">
                                     <a  class="nav-link count-indicatord-flex align-item s-center justify-content-center" id="notificationDropdown" href="station_admin_home" data-toggle="dropdown">
                                         <i class="icon-file menu-icon"></i>
                                         <span class="menu-title">Complaints</span>
                                     </a>
                                     <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
                                         <!-- <p class="mb-0 font-weight-normal float-left dropdown-header">Settings</p> -->
                                         <!-- <a class="dropdown-item preview-item" href="/station_admin_view_complaints">
                                            <i class="icon-help menu-icon"></i>
                                            <span class="menu-title">View Complaints </span>
                                        </a>
                                         <a class="dropdown-item preview-item" href="/station_admin_view_normal_complaint">
                                             <i class="icon-help menu-icon"></i>
                                             <span class="menu-title">Manage Normal Complaints</span>
                                         </a> -->
                                         <a class="dropdown-item preview-item" href="/station_admin_view_personalize_complaint"> 
                                             <i class="icon-help menu-icon"></i>
                                             <span class="menu-title">Manage Personalized Complaints</span>
                                         </a>
                                         <a class="dropdown-item preview-item" href="/station_admin_view_spot_complaints">
                                            <i class="icon-help menu-icon"></i>
                                            <span class="menu-title">View Spot Complaint </span>
                                        </a>
                                     </li>
                             <li class="nav-item dropdown d-flex mr-4 ">
                                 <a class="nav-link count-indicator dropdown-toggle d-flex align-items-center justify-content-center" id="notificationDropdown" href="/logout">
                                     <i class="fa fa-sign-out" aria-hidden="true"></i> Logout
                                 </a>
                                 
                             </li>
                         </div>
                     </li>
                     
                 </ul>
                 <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
                     <span class="icon-menu"></span>
                 </button>
             <!-- </div> -->
         </nav>
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:partials/_sidebar.html -->
            
            <!-- partial -->
            <div class="main-panel" style="margin: auto;">
                <div class="content-wrapper">
                    <div class="row">
                        
                    </div>
                    <div class="row mt-3">
                        <div class="col-lg-12 grid-margin stretch-card">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">View  Station Employees</h4>
                                  
                                    <div class="table-responsive pt-3">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th> Image</th>

                                                    <th> Name </th>
                                                    <th>
                                                        Gender
                                                    </th>
                                                    <th>
                                                        Dob
                                                    </th>
                                                    <th>
                                                        Email
                                                    </th>
                                                    <th>
                                                        Phone
                                                    </th>
                                                    <th>
                                                        Address
                                                    </th>
                                                    <th>
                                                        Adharnumber
                                                    </th>
                                                    <th>
                                                        Occupation
                                                    </th>

                                                    <th scope="2">
                                                        Action
                                                    </th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for row in rows%}
                                                <tr>
                                                    <td><img src="/static/upload/{{row[10]}}" alt="" style="background: violet;"></td>


                                                    <td>{{row[2]}}</td>
                                                    <td>{{row[3]}}</td>
                                                    <td>{{row[4]}}</td>
                                                    <td>{{row[5]}}</td>
                                                    <td>{{row[6]}}</td>
                                                    <td>{{row[7]}}</td>
                                                    <td>{{row[8]}}</td>
                                                    <td>{{row[9]}}</td>

                                                    <td style="display: flex;height: 68px;">
                                                        <button type="button" class="badge bg-success" id="{{row[0]}},{{row[2]}},{{row[3]}},{{row[4]}},{{row[5]}},{{row[6]}},{{row[7]}},{{row[8]}},{{row[9]}}" onclick="get_id(this)" data-toggle="modal" data-target="#exampleModal">
                                                            Edit
                                                           </button>

                                                        <button class="badge bg-danger" id="{{row[0]}},{{row[12]}},{{row[18]}}" onclick="get_deleteid(this)">Delete</button>
                                                        <input type="text" id="loginid" hidden>
                                                        <input type="text" id="regid" hidden>
                                                        <input type="text" id="stationmapid" hidden>
                                                        <!-- <form action="/" method="POST"><button class="badge bg-primary" value="" name="accept">Edit</button></form> -->
                                                        <!-- <form action="/delete_advocate_admin" method="POST" onclick="myFunction()"><button class="badge bg-danger" value="{{row[0]}} {{row[5]}} {{row[17]}}" name="delete_by_id">Delete</button></form> -->
                                                    </td>
                                                </tr>

                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script>
                        function get_id(param) {
                            data = param.id.split(',')
                            console.log(data[0])
                            document.getElementById('id').value = data[0];
                            document.getElementById('name').value = data[1];
                            document.getElementById('gender').value = data[2];
                            document.getElementById('dob').value = data[3];
                            document.getElementById('email').value = data[4];
                            document.getElementById('phone').value = data[5];
                            document.getElementById('address').value = data[6];
                            document.getElementById('adharnumber').value = data[7];
                            document.getElementById('occupation').value = data[8];


                        }

                        function printSelectedItem() {
                            var id = document.getElementById('id').value;
                            var name = document.getElementById("name").value;
                            var gender = document.getElementById('gender').value;
                            var dob = document.getElementById('dob').value;
                            var email = document.getElementById('email').value;
                            var phone = document.getElementById("phone").value;
                            var address = document.getElementById('address').value;
                            var adharnumber = document.getElementById('adharnumber').value;
                            var occupation = document.getElementById('occupation').value;

                            var dt = {
                                id: id,
                                name: name,
                                gender: gender,
                                dob: dob,
                                email: email,
                                phone: phone,
                                address: address,
                                adharnumber: adharnumber,
                                occupation: occupation

                            }
                            console.log(dt)
                            fetch("http://localhost:5000/update_station_employee", {
                                method: "POST",
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify(dt)
                            }).then(res => {
                                console.log("Request complete! response:", res);
                                window.location.reload();
                            });
                        }

                        function get_deleteid(param) {
                            data = param.id.split(',')
                            console.log(data[0])
                            document.getElementById('loginid').value = data[0];
                            document.getElementById('regid').value = data[1];
                            document.getElementById('stationmapid').value = data[2];






                            var loginid = document.getElementById('loginid').value;
                            var regid = document.getElementById('regid').value;
                            var stationmapid = document.getElementById('stationmapid').value;

                            var dt = {
                                lid: loginid,
                                regid: regid,
                                stid: stationmapid,


                            }
                            console.log(dt)
                            fetch("http://localhost:5000/station_admin_delete_employee", {
                                method: "POST",
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify(dt)
                            }).then(res => {
                                    console.log("Request complete! response:", res);
                                    swal({
                                            title: "Successfully deleted",
                                            icon: "success",
                                            buttons: true,
                                            dangerMode: true,
                                            timer: 5000

                                        })
                                        // window.alert("Successfully deleted")
                                    window.location.reload();
                                },
                                err => {
                                    // window.alert("Something Error")
                                    swal({
                                        title: "Something Error",
                                        icon: "warning",
                                        buttons: true,
                                        dangerMode: true,
                                        timer: 5000

                                    })
                                });
                        }
                    </script>
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Update Station Employee Details</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">&times;</span>
</button>
                                </div>
                                <div class="modal-body">

                                    <div class="form-group col-12">

                                        <div id="full-stars-example">

                                            <div class="col-sm-12">
                                                <input class="form-control form-control-lg" id="id" hidden>
                                                <input type="text" class="form-control form-control-lg" id="name">
                                            </div><br>
                                            <div class="col-sm-12">
                                                <input type="text" id="gender" class="form-control form-control-lg" />
                                            </div><br>
                                            <div class="col-sm-12">
                                                <input type="text" id="dob" class="form-control form-control-lg" />
                                            </div><br>
                                            <div class="col-sm-12">
                                                <input type="text" id="email" class="form-control form-control-lg" />
                                            </div><br>
                                            <div class="col-sm-12">
                                                <input type="text" id="phone" class="form-control form-control-lg" />
                                            </div><br>
                                            <div class="col-sm-12">
                                                <input type="text" id="address" class="form-control form-control-lg" />
                                            </div><br>
                                            <div class="col-sm-12">
                                                <input type="text" id="adharnumber" class="form-control form-control-lg" />
                                            </div><br>
                                            <div class="col-sm-12">
                                                <input type="text" id="occupation" class="form-control form-control-lg" />
                                            </div>

                                        </div>
                                    </div>
                                    <div class="modal-footer">

                                        <button type="submit" onclick="printSelectedItem()" class="btn btn-primary">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
                <!-- content-wrapper ends -->
                <!-- partial:partials/_footer.html -->
               
                <!-- partial -->
            </div>
            <!-- main-panel ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <script>
        function myFunction() {
            alert("Sccessfully Deleted!");
        }
    </script>
    <!-- base:js -->
    <script src="{{url_for('static',filename='vendors/base/vendor.bundle.base.js')}}"></script>
    <!-- endinject -->
    <!-- Plugin js for this page-->
    <!-- End plugin js for this page-->
    <!-- inject:js -->
    <script src="{{url_for('static',filename='js/off-canvas.js')}}"></script>
    <script src="{{url_for('static',filename='js/hoverable-collapse.js')}}"></script>
    <script src="{{url_for('static',filename='js/template.js')}}"></script>
    <!-- endinject -->
    <!-- plugin js for this page -->
    <script src="{{url_for('static',filename='vendors/chart.js/Chart.min.js')}}"></script>
    <script src="{{url_for('static',filename='vendors/jquery-bar-rating/jquery.barrating.min.js')}}"></script>
    <!-- End plugin js for this page -->
    <!-- Custom js for this page-->
    <script src="{{url_for('static',filename='js/dashboard.js')}}"></script>
    <!-- End custom js for this page-->
</body>

</html>